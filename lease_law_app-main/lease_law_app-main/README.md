<div align="center">

![header](https://capsule-render.vercel.app/api?type=waving&color=gradient&customColorList=2,2,5,30&height=200&section=header&text=F-NAL&fontSize=80&fontAlignY=35&desc=ì£¼íƒì„ëŒ€ì°¨%20ë²•ë¥ %20RAG%20AI%20ìƒë‹´%20ì‹œìŠ¤í…œ%20|%20AWS%20ë°°í¬&descAlignY=55&descAlign=50)

[![Typing SVG](https://readme-typing-svg.herokuapp.com?font=Fira+Code&weight=600&size=24&pause=1000&color=4A90E2&center=true&vCenter=true&width=700&lines=Hybrid+RAG+Legal+Chatbot;AWS+EC2+Production+Deployment;Django+%2B+Streamlit+Dual+Server)](https://git.io/typing-svg)

<br>

[![Live Demo](https://img.shields.io/badge/ğŸŒ_Live_Demo-52.79.175.135-FF6B6B?style=for-the-badge)](http://52.79.175.135)
[![YouTube](https://img.shields.io/badge/ğŸ“º_ì‹œì—°_ì˜ìƒ-YouTube-FF0000?style=for-the-badge&logo=youtube&logoColor=white)](https://www.youtube.com/watch?v=GFpilFkehSo)
[![Original Repo](https://img.shields.io/badge/ğŸ“¦_ì›ë³¸_Repository-GitHub-181717?style=for-the-badge&logo=github&logoColor=white)](https://github.com/thre3o2wo/2ndTeamProject)

</div>

---

## ğŸ“Œ ê°œìš”

ì´ ë¦¬í¬ì§€í† ë¦¬ëŠ” **F-NAL ë²•ë¥  RAG AI ì±—ë´‡**ì˜ **AWS EC2 ë°°í¬ ë²„ì „**ì…ë‹ˆë‹¤.

ì „ì²´ í”„ë¡œì íŠ¸ ë¬¸ì„œ(íŒŒì´í”„ë¼ì¸ ìƒì„¸, ëª¨ë“ˆ API, ì„¤ì • ì»¤ìŠ¤í„°ë§ˆì´ì§• ë“±)ëŠ” [ì›ë³¸ Repository](https://github.com/thre3o2wo/2ndTeamProject)ë¥¼ ì°¸ê³ í•´ ì£¼ì„¸ìš”.

> **í”„ë¡œì íŠ¸ëª…**: ë²•ë¥  RAG ê¸°ë°˜ ì£¼íƒ ì„ëŒ€ì°¨ê³„ì•½ ë¦¬ìŠ¤í¬ ë¶„ì„ AI ì±—ë´‡  
> **íŒ€**: TEAM ì•ˆì „í•œå®¶ (ë°•ìƒìš©, ê¹€ì¬í•™, ê¹€ì§€í›ˆ, ê¹€íš¨ê²½)  
> **ê°œë°œ ê¸°ê°„**: 2026.01.12 - 2026.02.10 (4ì£¼)  
> **ê³¼ì •**: [KDT] ê¸°ì—…ë§ì¶¤í˜• AI+X ìœµë³µí•© ì¸ì¬ ì–‘ì„± ê³¼ì • 2ì°¨ íŒ€í”„ë¡œì íŠ¸

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

<div align="center">

<table>
  <tr>
    <td width="160px" align="center"><b>êµ¬ë¶„</b></td>
    <td><b>ê¸°ìˆ </b></td>
  </tr>
  <tr>
    <td align="center"><b>AI / LLM</b></td>
    <td>
      <img src="https://img.shields.io/badge/Upstage-SOLAR-6E3FF3?style=for-the-badge&logo=lightning&logoColor=white">
      <img src="https://img.shields.io/badge/OpenAI-GPT--4o--mini-412991?style=for-the-badge&logo=openai&logoColor=white">
      <img src="https://img.shields.io/badge/LangChain-1C3C3C?style=for-the-badge&logo=langchain&logoColor=white">
    </td>
  </tr>
  <tr>
    <td align="center"><b>Data & Vector</b></td>
    <td>
      <img src="https://img.shields.io/badge/Pinecone-VectorDB-243A5E?style=for-the-badge&logo=pinecone&logoColor=white">
      <img src="https://img.shields.io/badge/Cohere-Rerank-3FB58E?style=for-the-badge&logo=cohere&logoColor=white">
      <img src="https://img.shields.io/badge/BM25_Sparse-02569B?style=for-the-badge">
    </td>
  </tr>
  <tr>
    <td align="center"><b>Document & OCR</b></td>
    <td>
      <img src="https://img.shields.io/badge/EasyOCR-5DADE2?style=for-the-badge&logo=googlelens&logoColor=white">
      <img src="https://img.shields.io/badge/pytesseract-00A4EF?style=for-the-badge&logo=googlelens&logoColor=white">
      <img src="https://img.shields.io/badge/pdfplumber-FF0000?style=for-the-badge&logo=adobeacrobatreader&logoColor=white">
      <img src="https://img.shields.io/badge/PyMuPDF-E0115F?style=for-the-badge&logo=adobeacrobatreader&logoColor=white">
    </td>
  </tr>
  <tr>
    <td align="center"><b>Web Framework</b></td>
    <td>
      <img src="https://img.shields.io/badge/Django_5.2-092E20?style=for-the-badge&logo=django&logoColor=white">
      <img src="https://img.shields.io/badge/Streamlit-FF4B4B?style=for-the-badge&logo=streamlit&logoColor=white">
    </td>
  </tr>
  <tr>
    <td align="center"><b>Deployment</b></td>
    <td>
      <img src="https://img.shields.io/badge/AWS_EC2-232F3E?style=for-the-badge&logo=amazonaws&logoColor=white">
    </td>
  </tr>
  <tr>
    <td align="center"><b>Version Control</b></td>
    <td>
      <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white">
      <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">
    </td>
  </tr>
</table>

</div>

---

## ğŸ—ï¸ ë°°í¬ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     AWS EC2 Instance                     â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Django App     â”‚         â”‚   Streamlit App         â”‚ â”‚
â”‚  â”‚   (Port 8000)    â”‚         â”‚   (Port 8501)           â”‚ â”‚
â”‚  â”‚                  â”‚         â”‚                         â”‚ â”‚
â”‚  â”‚  Â· ë©”ì¸ í˜ì´ì§€    â”‚  â†â”€â”€â”€â†’  â”‚  Â· ì±„íŒ… ì¸í„°í˜ì´ìŠ¤      â”‚ â”‚
â”‚  â”‚  Â· Chat REST API â”‚         â”‚  Â· íŒŒì¼ ì—…ë¡œë“œ / OCR    â”‚ â”‚
â”‚  â”‚  Â· OCR ì„¸ì…˜ ê´€ë¦¬  â”‚         â”‚  Â· RAG íŒŒì´í”„ë¼ì¸       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                      â”‚                                    â”‚
â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚             â”‚    modules/      â”‚                          â”‚
â”‚             â”‚  â”œâ”€ rag_module   â”‚  â† Hybrid RAG Pipeline  â”‚
â”‚             â”‚  â””â”€ ocr_module   â”‚  â† OCR / PDF ì²˜ë¦¬       â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â–¼            â–¼                  â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Pinecone  â”‚ â”‚  Upstage  â”‚    â”‚   OpenAI   â”‚
   â”‚ Vector DB â”‚ â”‚ SOLAR Pro2â”‚    â”‚ GPT-4o-miniâ”‚
   â”‚           â”‚ â”‚ Embeddingsâ”‚    â”‚            â”‚
   â”‚ law-index â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚ rule-indexâ”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ case-indexâ”‚       â”‚  Cohere   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  Reranker â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ë°°í¬ í´ë” êµ¬ì¡°

> ì›ë³¸ ë¦¬í¬ì—ì„œ **ë°°í¬ì— í•„ìš”í•œ íŒŒì¼ë§Œ** ì¶”ì¶œí•œ êµ¬ì¡°ì…ë‹ˆë‹¤.

```
lease_law_app/
â”‚
â”œâ”€â”€ .git/                        # Git ë²„ì „ ê´€ë¦¬
â”œâ”€â”€ .venv/                       # Python ê°€ìƒí™˜ê²½
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .env                         # í™˜ê²½ ë³€ìˆ˜ (API í‚¤)
â”œâ”€â”€ requirements.txt             # Python ì˜ì¡´ì„±
â”œâ”€â”€ web_chatbot.py               # Streamlit ì±„íŒ… ì¸í„°í˜ì´ìŠ¤
â”‚
â”œâ”€â”€ modules/                     # ê³µìœ  í•µì‹¬ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ rag_module.py            #   Hybrid RAG íŒŒì´í”„ë¼ì¸
â”‚   â””â”€â”€ ocr_module.py            #   OCR ìœ í‹¸ë¦¬í‹°
â”‚
â””â”€â”€ chatbot_app/                 # Django ì›¹ì•±
    â”œâ”€â”€ manage.py
    â”œâ”€â”€ config/                  #   Django ì„¤ì •
    â”‚   â”œâ”€â”€ settings.py
    â”‚   â”œâ”€â”€ urls.py
    â”‚   â””â”€â”€ wsgi.py
    â””â”€â”€ chatbot/                 #   ì±—ë´‡ ì•±
        â”œâ”€â”€ views.py             #     Chat API, OCR ì—”ë“œí¬ì¸íŠ¸
        â”œâ”€â”€ urls.py
        â””â”€â”€ templates/chatbot/
            â””â”€â”€ index.html       #     ë©”ì¸ í˜ì´ì§€
```

---

## ğŸ“Š ì„±ëŠ¥ í‰ê°€ (RAGAS)

<div align="center">

<table>
  <tr>
    <th align="center">ì§€í‘œ</th>
    <th align="center">ì ìˆ˜</th>
    <th align="center">ì˜ë¯¸</th>
  </tr>
  <tr>
    <td align="center"><b>âœ… Context Precision</b></td>
    <td align="center"><b>1.00</b></td>
    <td align="center">ê²€ìƒ‰ ì •ë°€ë„ â€” Cohere Reranker ì ìš©</td>
  </tr>
  <tr>
    <td align="center"><b>âœ… Context Recall</b></td>
    <td align="center"><b>0.75</b></td>
    <td align="center">ê²€ìƒ‰ ì¬í˜„ìœ¨ â€” Hybrid Retrieval</td>
  </tr>
  <tr>
    <td align="center"><b>âœ… Ri (Custom)</b></td>
    <td align="center"><b>0.85</b></td>
    <td align="center">ì¢…í•© ê²€ìƒ‰ ì„±ëŠ¥ ì§€í‘œ</td>
  </tr>
  <tr>
    <td align="center">Faithfulness</td>
    <td align="center">0.34</td>
    <td align="center">ë‹µë³€ ì¶©ì‹¤ì„±</td>
  </tr>
  <tr>
    <td align="center">Answer Relevancy</td>
    <td align="center">0.41</td>
    <td align="center">ë‹µë³€ ê´€ë ¨ì„±</td>
  </tr>
</table>

</div>

### ì£¼ìš” ì„±ê³¼

| ì„±ê³¼ | ì„¤ëª… |
|:---:|:---|
| ğŸ¯ **Precision 100%** | Cohere Reranker ì ìš©ìœ¼ë¡œ ì™„ë²½í•œ ê²€ìƒ‰ ì •ë°€ë„ ë‹¬ì„± |
| ğŸ”€ **Hybrid ê²€ìƒ‰** | Dense + Sparse í†µí•© íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ ì•ˆì •ì  Recall í™•ë³´ |
| ğŸ¤– **LLM ìµœì í™”** | 6ê°œ ëª¨ë¸ ë¹„êµ í‰ê°€ â†’ GPT-4o-mini ì„ ì • (ì†ë„/ë¹„ìš©/í’ˆì§ˆ ìµœì ) |
| ğŸ“ **Prompt ë¶„ë¦¬** | ì¼ë°˜ ìƒë‹´ vs ê³„ì•½ì„œ ë¶„ì„ ëª¨ë“œ ì´ì›í™”ë¡œ ì‹¤ìš©ì„± í–¥ìƒ |
| ğŸŒ **AWS ë°°í¬** | EC2 ì¸ìŠ¤í„´ìŠ¤ì— Django + Streamlit ë“€ì–¼ ì„œë²„ ìš´ì˜ |

---

## âš™ï¸ í™˜ê²½ ë³€ìˆ˜

`.env` íŒŒì¼ì„ í”„ë¡œì íŠ¸ ë£¨íŠ¸(`lease_law_app/`)ì— ìƒì„±í•©ë‹ˆë‹¤.

```env
# LLM & Embedding
OPENAI_API_KEY=sk-proj-xxxxx
UPSTAGE_API_KEY=up_xxxxx

# Vector DB
PINECONE_API_KEY=pcsk_xxxxx

# Reranking
COHERE_API_KEY=xxxxx

# Django
DJANGO_SECRET_KEY=your-secret-key-here

# HuggingFace (ì„ íƒ)
HF_TOKEN=hf_xxxxx
```

**API í‚¤ ë°œê¸‰:**
| ì„œë¹„ìŠ¤ | ìš©ë„ | ë°œê¸‰ ë§í¬ |
|--------|------|-----------|
| **Upstage** | ì„ë² ë”©, ì§ˆë¬¸ í‘œì¤€í™” | https://console.upstage.ai |
| **Pinecone** | ë²¡í„° ìŠ¤í† ì–´ | https://app.pinecone.io |
| **Cohere** | ë¦¬ë­í‚¹ | https://dashboard.cohere.com |
| **OpenAI** | ë‹µë³€ ìƒì„± | https://platform.openai.com |

---

## ğŸš€ AWS EC2 ë°°í¬ ê°€ì´ë“œ

### 1ï¸âƒ£ EC2 ì¸ìŠ¤í„´ìŠ¤ ì¤€ë¹„

```bash
# EC2 ì ‘ì†
ssh -i your-key.pem ubuntu@<EC2_PUBLIC_IP>

# ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
sudo apt update && sudo apt upgrade -y

# Python ë° í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜
sudo apt install -y python3-pip python3-venv git
```

### 2ï¸âƒ£ Tesseract OCR ì„¤ì¹˜

```bash
# OCR ê¸°ëŠ¥ì— í•„ìš” (í•œêµ­ì–´ ì–¸ì–´íŒ© í¬í•¨)
sudo apt install -y tesseract-ocr tesseract-ocr-kor
```

### 3ï¸âƒ£ í”„ë¡œì íŠ¸ í´ë¡  & í™˜ê²½ ì„¤ì •

```bash
# ë¦¬í¬ì§€í† ë¦¬ í´ë¡ 
git clone <REPOSITORY_URL>
cd lease_law_app

# ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python3 -m venv .venv
source .venv/bin/activate

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
nano .env    # API í‚¤ ì…ë ¥
```

### 4ï¸âƒ£ Django ì´ˆê¸° ì„¤ì •

```bash
cd chatbot_app

# DB ë§ˆì´ê·¸ë ˆì´ì…˜
python manage.py migrate

# ì •ì  íŒŒì¼ ìˆ˜ì§‘
python manage.py collectstatic --noinput
```

### 5ï¸âƒ£ ì„œë²„ ì‹¤í–‰

```bash
# Django ì„œë²„ (ë°±ê·¸ë¼ìš´ë“œ)
nohup python manage.py runserver 0.0.0.0:8000 > django.log 2>&1 &

# í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¡œ ì´ë™ í›„ Streamlit ì‹¤í–‰
cd ..
nohup streamlit run web_chatbot.py \
    --server.port 8501 \
    --server.address 0.0.0.0 \
    > streamlit.log 2>&1 &
```

### 6ï¸âƒ£ EC2 ë³´ì•ˆ ê·¸ë£¹ (ì¸ë°”ìš´ë“œ ê·œì¹™)

<div align="center">

| í¬íŠ¸ | í”„ë¡œí† ì½œ | ì†ŒìŠ¤ | ìš©ë„ |
|:---:|:---:|:---:|:---|
| **22** | TCP | My IP | SSH ì ‘ì† |
| **8000** | TCP | 0.0.0.0/0 | Django ë©”ì¸ ì„œë²„ |
| **8501** | TCP | 0.0.0.0/0 | Streamlit ì±—ë´‡ |

</div>

### 7ï¸âƒ£ ì ‘ì† í™•ì¸

```
ğŸŒ Django ë©”ì¸ :  http://<EC2_PUBLIC_IP>:8000/
ğŸ’¬ Streamlit   :  http://<EC2_PUBLIC_IP>:8501/
```

---

## ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

### `POST /api/chat/`

**í…ìŠ¤íŠ¸ ì§ˆë¬¸ (JSON):**
```bash
curl -X POST http://<EC2_PUBLIC_IP>:8000/api/chat/ \
  -H "Content-Type: application/json" \
  -d '{"message": "ì „ì„¸ ë³´ì¦ê¸ˆ ë°˜í™˜ ì ˆì°¨ëŠ” ì–´ë–»ê²Œ ë˜ë‚˜ìš”?"}'
```

**íŒŒì¼ ì²¨ë¶€ ì§ˆë¬¸ (Multipart):**
```bash
curl -X POST http://<EC2_PUBLIC_IP>:8000/api/chat/ \
  -F "message=ì´ ê³„ì•½ì„œì—ì„œ ë¬¸ì œì ì´ ìˆë‚˜ìš”?" \
  -F "files=@contract.pdf"
```

**ì‘ë‹µ:**
```json
{
  "normalized_query": "ì„ëŒ€ì°¨ë³´ì¦ê¸ˆ ë°˜í™˜ ì²­êµ¬ ì ˆì°¨",
  "references": ["ì£¼íƒì„ëŒ€ì°¨ë³´í˜¸ë²• ì œ3ì¡°(ëŒ€í•­ë ¥ ë“±)", ...],
  "response": "ì£¼íƒì„ëŒ€ì°¨ë³´í˜¸ë²• ì œ3ì¡°ì— ë”°ë¥´ë©´...",
  "has_ocr_context": false
}
```

### `POST /api/clear-ocr/`

ì„¸ì…˜ì— ì €ì¥ëœ OCR ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.

---

## ğŸ› ï¸ ìš´ì˜ ê´€ë¦¬

### ë¡œê·¸ í™•ì¸
```bash
# Django ë¡œê·¸
tail -f django.log

# Streamlit ë¡œê·¸
tail -f streamlit.log
```

### ì„œë²„ ì¬ì‹œì‘
```bash
# ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
pkill -f "manage.py runserver"
pkill -f "streamlit run"

# ì¬ì‹œì‘
cd ~/lease_law_app/chatbot_app
nohup python manage.py runserver 0.0.0.0:8000 > django.log 2>&1 &

cd ~/lease_law_app
nohup streamlit run web_chatbot.py \
    --server.port 8501 --server.address 0.0.0.0 \
    > streamlit.log 2>&1 &
```

### í”„ë¡œì„¸ìŠ¤ ìƒíƒœ í™•ì¸
```bash
ps aux | grep -E "(manage.py|streamlit)"
```

---

## ğŸ”— ê´€ë ¨ ë§í¬

<div align="center">

| ë§í¬ | ì„¤ëª… |
|:---:|:---|
| [ğŸ“¦ ì›ë³¸ Repository](https://github.com/thre3o2wo/2ndTeamProject) | ì „ì²´ í”„ë¡œì íŠ¸ ë¬¸ì„œ, íŒŒì´í”„ë¼ì¸ ìƒì„¸, ì„¤ì • ê°€ì´ë“œ |
| [ğŸ“º ì‹œì—° ì˜ìƒ](https://www.youtube.com/watch?v=GFpilFkehSo) | í”„ë¡œì íŠ¸ ë°ëª¨ ì˜ìƒ |
| [ğŸŒ Live Demo](http://52.79.175.135) | AWS ë°°í¬ ì„œë¹„ìŠ¤ |

</div>

---

<div align="center">

![footer](https://capsule-render.vercel.app/api?type=waving&color=gradient&customColorList=2,2,5,30&height=100&section=footer)

</div>
